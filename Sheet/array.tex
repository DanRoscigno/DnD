\documentclass{article}

\usepackage{xparse,array}

\ExplSyntaxOn
\NewDocumentCommand{\CountBox}{m}
 {
  % measure the wider number
  \hbox_set:Nn \l_tmpa_box { 20 }
  \dim_set:Nn \l_tmpa_dim { \box_wd:N \l_tmpa_box }
  % do as many columns as specified
  \begin{tabular}{|*{20}{w{c}{\l_tmpa_dim}|}}
  \hline
  % do '<number> &' one less than specified, then add the last number
  \int_step_function:nN { 20 - 1 } \__phlemp_countbox_head:n 20 \\
  \hline
  % generate as many &'s as necessary to fill the second row
  \prg_replicate:nn { #1 } {X & } \\
  \hline
  \end{tabular}
 }

% auxiliary function for adding the & after the number
\cs_new_protected:Nn \__phlemp_countbox_head:n { 20 & }
\ExplSyntaxOff

\begin{document}

\CountBox{10}
\end{document}
